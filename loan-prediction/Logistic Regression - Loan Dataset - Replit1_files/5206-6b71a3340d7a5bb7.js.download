!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="172156b4-771d-4f2b-96b0-26a83c8fc253",e._sentryDebugIdIdentifier="sentry-dbid-172156b4-771d-4f2b-96b0-26a83c8fc253")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"6fc18b5e"};"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5206],{95206:function(e,n,t){t.d(n,{Z:function(){return eg}});var r,o,i=t(66626),l=t(74985),s=t(25770),u=t(25061),a=t(55534),d=t(1498),c=t(74833),p=t(56596),m=t(98859),h=t(29287),f=t(41733),v=t(21262),b=t(71440),g=t(99165);function Z(){var e=(0,v._)(["\n  mutation HidePostToggleHiddenPost($postId: Int!, $isHidden: Boolean!) {\n    toggleHiddenPost(postId: $postId, isHidden: $isHidden) {\n      ... on Post {\n        id\n        isHidden\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return Z=function(){return e},e}var w={},y=(0,b.Ps)(Z()),C=p.K.form;function D(e){var n,t,r=e.post,o=e.onDone,s=(0,a.Z)(),u=s.showConfirm,v=s.showError,b=(0,i._)((n={variables:{postId:r.id,isHidden:!r.isHidden},onCompleted:function(e){"Post"===e.toggleHiddenPost.__typename?r.isHidden?u("Post removed from the community."):u("Post allowed on community."):"NotFoundError"===e.toggleHiddenPost.__typename||"UserError"===e.toggleHiddenPost.__typename?v(e.toggleHiddenPost.message):v("An unexpected error occurred."),o()},onError:function(){v("Something went wrong. Please try again.")}},t=(0,f._)({},w,n),g.D(y,t)),2),Z=b[0],D=b[1].loading,T=r.isHidden?"Yes, show this post":"Yes, hide this post",_=r.isHidden?"Showing...":"Hiding...",R=r.isHidden?"Show this post to the Community":"Hide this post from the Community";return(0,l.BX)(p.G,{css:[h.l0.colWithGap(24)],children:[(0,l.tZ)(c.xv,{variant:"subheadBig",children:R}),(0,l.BX)(C,{onSubmit:function(e){e.preventDefault(),Z()},css:[h.l0.colWithGap(32)],children:[(0,l.tZ)(c.xv,{children:"Hiding a post will remove it from the Community feeds, but the post will still be viewable to the creator. Showing a post will make it so all users will be able to discover this post though community feeds."}),(0,l.BX)(p.G,{css:[h.l0.rowWithGap(8),h.l0.justify.end],children:[(0,l.tZ)(p.G,{children:(0,l.tZ)(d.zx,{type:"button",text:"Cancel",onClick:o})}),(0,l.tZ)(p.G,{children:(0,l.tZ)(d.zx,{disabled:D,colorway:"negative",text:D?_:T,type:"submit",iconLeft:(0,l.tZ)(m.Z,{})})})]})]})]})}var T=t(18836),_=t(24890),R=t(50959);function G(){var e=(0,v._)(["\n  mutation BanUserFromCommunity($username: String!, $reason: String!) {\n    banCommunityUser(username: $username, reason: $reason) {\n      ... on BannedBoardUser {\n        id\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return G=function(){return e},e}var x={},P=(0,b.Ps)(G()),E=p.K.form;function U(e){var n,t=e.username,r=e.onDone,o=(0,i._)((0,R.useState)(""),2),s=o[0],u=o[1],m=(0,a.Z)(),v=m.showConfirm,b=m.showError,Z=(0,i._)((n=(0,f._)({},x,{onCompleted:function(e){var n=e.banCommunityUser;"UserError"===n.__typename?b(n.message):v("The user has been banned.")}}),g.D(P,n)),2),w=Z[0],y=Z[1].loading;return(0,l.BX)(p.G,{css:[h.l0.colWithGap(24)],children:[(0,l.tZ)(c.h4,{level:1,variant:"headerDefault",children:"Ban the author of the Repl?"}),(0,l.tZ)(c.xv,{children:"Are you sure you want to ban this user? All their Repls will be deleted and they will no longer be able to access their account."}),(0,l.BX)(E,{onSubmit:function(e){e.preventDefault(),s&&t?(w({variables:{username:t,reason:s}}),r()):b("Please provide a reason.")},css:[h.l0.colWithGap(24)],children:[(0,l.tZ)(p.G,{css:[h.l0.colWithGap(8)],children:(0,l.tZ)(T.B,{placeholder:"Reason for banning the user",value:s,onChange:function(e){return u(e.currentTarget.value)},css:{resize:"none",minHeight:40}})}),(0,l.BX)(p.G,{css:[h.l0.rowWithGap(8),h.l0.justify.end],children:[(0,l.tZ)(d.zx,{type:"button",text:"Cancel",onClick:function(){return r()}}),(0,l.tZ)(d.zx,{disabled:y,colorway:"negative",text:y?"Banning user...":"Yes, ban this user",type:"submit",iconLeft:(0,l.tZ)(_.Z,{})})]})]})]})}var B=t(75875);function H(){var e=(0,v._)(["\n  mutation ReportRepl($replId: String, $reason: String!) {\n    createBoardReport(replId: $replId, reason: $reason) {\n      id\n    }\n  }\n"]);return H=function(){return e},e}var W={},k=(0,b.Ps)(H()),I=p.K.form;function S(e){var n,t=e.replId,r=e.onDone,o=(0,i._)((0,R.useState)(""),2),s=o[0],u=o[1],m=(0,a.Z)(),v=m.showConfirm,b=m.showError,Z=(0,i._)((n=(0,f._)({},W,{variables:{replId:t,reason:s},onCompleted:function(){v("Repl reported"),r()},onError:function(e){b(e.message)}}),g.D(k,n)),2),w=Z[0],y=Z[1].loading;return(0,l.BX)(p.G,{css:[h.l0.colWithGap(24)],children:[(0,l.tZ)(c.xv,{variant:"subheadBig",multiline:!1,children:"Report Repl"}),(0,l.BX)(I,{onSubmit:function(e){e.preventDefault(),s?w():b("Not reported. No reason specified.")},css:[h.l0.colWithGap(32)],children:[(0,l.tZ)(p.G,{css:[h.l0.colWithGap(8)],children:(0,l.tZ)(T.B,{placeholder:"Why do you want to report this Repl?",value:s,onChange:function(e){return u(e.currentTarget.value)},css:[h.l0.minHeight(64),h.l0.maxHeight(128),{resize:"vertical"}]})}),(0,l.BX)(p.G,{css:[h.l0.rowWithGap(16),h.l0.justify.end],children:[(0,l.tZ)(p.G,{children:(0,l.tZ)(d.zx,{type:"button",text:"Cancel",onClick:function(){return r()}})}),(0,l.tZ)(p.G,{children:(0,l.tZ)(d.zx,{disabled:y,text:y?"Reporting":"Report Repl",type:"submit",colorway:"negative",iconLeft:(0,l.tZ)(B.Z,{}),onClick:function(){return r()}})})]})]})]})}var A=t(20573);function X(){var e=(0,v._)(["\n  mutation WarnUser($username: String!, $reason: String!) {\n    warnUser(username: $username, reason: $reason) {\n      ... on Warning {\n        id\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return X=function(){return e},e}var $={},z=(0,b.Ps)(X()),O=p.K.form;function q(e){var n,t=e.username,r=e.onDone,o=(0,i._)((0,R.useState)(""),2),s=o[0],u=o[1],m=(0,a.Z)(),v=m.showConfirm,b=m.showError,Z=(0,i._)((n=(0,f._)({},$,{onCompleted:function(e){var n=e.warnUser;"UserError"===n.__typename?b(n.message):v("The user has been warned.")}}),g.D(z,n)),2),w=Z[0],y=Z[1].loading;return(0,l.BX)(p.G,{css:[h.l0.colWithGap(24)],children:[(0,l.tZ)(c.h4,{level:1,variant:"headerDefault",children:"Warn the author of the Repl?"}),(0,l.BX)(O,{onSubmit:function(e){e.preventDefault(),s&&t?(w({variables:{username:t,reason:s}}),r()):b("Please provide a reason.")},css:[h.l0.colWithGap(24)],children:[(0,l.tZ)(T.B,{placeholder:"Reason for warning the user",value:s,onChange:function(e){return u(e.currentTarget.value)},css:{resize:"none",minHeight:40}}),(0,l.BX)(p.G,{css:[h.l0.rowWithGap(8),h.l0.justify.end],children:[(0,l.tZ)(d.zx,{type:"button",text:"Cancel",onClick:function(){return r()}}),(0,l.tZ)(d.zx,{disabled:y,colorway:"negative",text:y?"Warning user...":"Yes, warn this user",type:"submit",iconLeft:(0,l.tZ)(A.Z,{})})]})]})]})}var N=t(20399),M=t(49344),L=t(23291),j=t(93918),Y=t(77615),F=t(41831),K=t(74883),J=t(52924),V=t(80339),Q=t(71498),ee=t(75582),en=t(47611),et=t(27387),er=t(96583),eo=t(73931);function ei(){var e=(0,v._)(["\n  mutation ReviewTemplateReview($input: ReviewTemplateInput!) {\n    reviewTemplate(input: $input) {\n      ... on TemplateReview {\n        id\n        repl {\n          id\n          ...ReplViewReplActionsPermissions\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return ei=function(){return e},e}var el={},es=(0,b.Ps)(ei(),eo.jN),eu=p.K.form;function ea(e){var n,t,r=e.replId,o=e.reviewType,s=e.onDone,u=(0,a.Z)(),m=u.showConfirm,v=u.showError,b="Something went wrong ".concat("promote"===o?"promoting":"demoting"," this Template"),Z=(0,i._)((n=(0,f._)({},el,{variables:{input:{replId:r,shouldPromote:"promote"===o}},onError:function(e){v(e.message)},onCompleted:function(e){"TemplateReview"===e.reviewTemplate.__typename?(m("Template successfully ".concat("promote"===o?"promoted":"demoted")),s()):"UnauthorizedError"===e.reviewTemplate.__typename||"UserError"===e.reviewTemplate.__typename?v(e.reviewTemplate.message):v(b)}}),g.D(es,n)),2),w=Z[0],y=Z[1];return(0,l.BX)(p.G,{css:[h.l0.colWithGap(24)],children:[(0,l.tZ)(c.h4,{level:1,variant:"headerDefault",children:"promote"===o?"Promote Template":"Demote Template?"}),(0,l.BX)(eu,{onSubmit:(t=(0,et._)(function(e){return(0,er.Jh)(this,function(n){return e.preventDefault(),w(),[2]})}),function(e){return t.apply(this,arguments)}),css:[h.l0.colWithGap(24)],children:["promote"===o?(0,l.tZ)(c.xv,{children:"Promoting a Template will show the Template in the Create Repl modal."}):(0,l.tZ)(c.xv,{children:"Demoting a Template will remove the Template from the Create Repl modal."}),(0,l.BX)(p.G,{css:[h.l0.rowWithGap(8),h.l0.justify.end],children:[(0,l.tZ)(d.zx,{type:"button",text:"Cancel",onClick:function(){return s()}}),"promote"===o?(0,l.tZ)(d.zx,{type:"submit",disabled:y.loading,colorway:"primary",iconLeft:(0,l.tZ)(F.Z,{}),text:y.loading?"Promoting Template...":"Promote Template"}):(0,l.tZ)(d.zx,{type:"submit",disabled:y.loading,colorway:"negative",iconLeft:(0,l.tZ)(Y.Z,{}),text:y.loading?"Demoting Template...":"Demote Template"})]})]})]})}var ed=t(5693),ec=t(32147);function ep(){var e=(0,v._)(["\n  mutation UnpublishTemplate($input: DeleteReplDeploymentInput!) {\n    deleteReplDeployment(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return ep=function(){return e},e}var em={},eh=(0,b.Ps)(ep(),ec.FW),ef=p.K.form;function ev(e){var n,t,r=e.replId,o=e.onDone,s=(0,a.Z)(),u=s.showConfirm,v=s.showError,b=(0,i._)((n=(0,f._)({},em,{variables:{input:{replId:r}}}),g.D(eh,n)),2),Z=b[0],w=b[1];return(0,l.BX)(p.G,{css:[h.l0.colWithGap(24)],children:[(0,l.tZ)(c.h4,{level:1,variant:"headerDefault",children:"Unpublish Template from Community?"}),(0,l.BX)(ef,{onSubmit:(t=(0,et._)(function(e){var n,t,r,i;return(0,er.Jh)(this,function(l){switch(l.label){case 0:e.preventDefault(),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,Z()];case 2:return i=l.sent(),[3,4];case 3:return l.sent(),v("Something went wrong. Please try again."),[3,4];case 4:if((null==i?void 0:null===(n=i.data)||void 0===n?void 0:n.deleteReplDeployment.__typename)==="Repl")u("Template successfully unpublished");else if((null==i?void 0:null===(t=i.data)||void 0===t?void 0:t.deleteReplDeployment.__typename)==="NotFoundError"||(null==i?void 0:null===(r=i.data)||void 0===r?void 0:r.deleteReplDeployment.__typename)==="UserError")return v(i.data.deleteReplDeployment.message),[2];return o(),[2]}})}),function(e){return t.apply(this,arguments)}),css:[h.l0.colWithGap(24)],children:[(0,l.tZ)(c.xv,{children:"Unpublishing a Template will remove it from the Templates page. The Repl itself will not be deleted, and you can always re-publish the Template again later."}),(0,l.BX)(p.G,{css:[h.l0.rowWithGap(8),h.l0.justify.end],children:[(0,l.tZ)(d.zx,{type:"button",text:"Cancel",onClick:function(){return o()}}),(0,l.tZ)(d.zx,{disabled:w.loading,colorway:"negative",text:w.loading?"Unpublishing Template...":"Yes, unpublish this Template",type:"submit",iconLeft:(0,l.tZ)(m.Z,{})})]})]})]})}(r=o||(o={})).warnAuthor="warnAuthor",r.banAuthor="banAuthor",r.reportRepl="reportRepl",r.unpublish="unpublish",r.unpublishTemplate="unpublishTemplate",r.promoteTemplate="promoteTemplate",r.demoteTemplate="demoteTemplate",r.modUnpublish="modUnpublish",r.modHide="modHide",r.update="update";var eb=(0,j.X)({item:[h.l0.rowWithGap(8),h.l0.align.center],destructiveItem:[h.l0.color.accentNegativeStronger],modPill:[h.l0.color.foregroundDefault,{textTransform:"uppercase"}]});function eg(e){var n,t,r,o=e.repl,a=e.post,d=e.currentUser,h=e.source,f=(0,i._)((0,R.useState)(null),2),v=f[0],b=f[1],g=new Map,Z=(0,en.useRouter)(),w="/replEnvironmentDesktop"===Z.pathname||"/replEnvironmentMobile"===Z.pathname,y=(0,s.aq)(o);if(o.currentUserPermissions.containerWrite&&!w&&g.set("edit",{label:"Edit in Workspace",onClick:function(){return Z.push(y.href,y.as)},icon:(0,l.tZ)(J.Z,{})}),o.currentUserPermissions.publish&&o.publishedAs&&o.publishedAs!==ee.O2.Template&&g.set("update",{label:"Add an update",onClick:function(){return b("update")},icon:(0,l.tZ)(K.Z,{})}),g.set("report",{label:"Report",isDestructive:!0,onClick:function(){return b("reportRepl")},icon:(0,l.tZ)(B.Z,{})}),(null==d?void 0:d.isModerator)&&(g.set("warning",{label:"Warning",isMod:!0,icon:(0,l.tZ)(A.Z,{}),onClick:function(){return b("warnAuthor")},isDestructive:!0}),g.set("banauthor",{label:"Ban author",isMod:!0,icon:(0,l.tZ)(_.Z,{}),onClick:function(){return b("banAuthor")},isDestructive:!0}),null!==o.lastPublishedAt)){var C=(null==a?void 0:a.isHidden)?(0,l.tZ)(V.Z,{}):(0,l.tZ)(m.Z,{}),T=(null==a?void 0:a.isHidden)?"Show post to Community":"Hide post from Community";a&&g.set("visibility",{label:T,icon:C,isMod:!0,isDestructive:!0,onClick:function(){return b("modHide")}}),g.set("modunpublish",{label:"Unpublish Repl",isMod:!0,icon:(0,l.tZ)(_.Z,{}),isDestructive:!0,onClick:function(){return b("modUnpublish")}})}return((null==d?void 0:d.isAdmin)&&o.publishedAs===ee.O2.Template&&((null===(r=o.templateReview)||void 0===r?void 0:r.promoted)?g.set("demote",{label:"Demote Template",icon:(0,l.tZ)(Y.Z,{}),isDestructive:!0,onClick:function(){return b("demoteTemplate")}}):g.set("promote",{label:"Promote Template",icon:(0,l.tZ)(F.Z,{}),onClick:function(){return b("promoteTemplate")}})),o.currentUserPermissions.publish&&null!==o.lastPublishedAt&&g.set("unpublish",{label:"Unpublish from Community",icon:(0,l.tZ)(m.Z,{}),isDestructive:!0,onClick:function(){return b("unpublish")}}),o.publishedAs===ee.O2.Template&&o.currentUserPermissions.publish&&g.set("unpublishtemplate",{label:"Unpublish Template",icon:(0,l.tZ)(m.Z,{}),isMod:!0,isDestructive:!0,onClick:function(){return b("unpublishTemplate")}}),g.size)?(0,l.BX)(l.HY,{children:[(0,l.tZ)(N.ZE,{icon:(0,l.tZ)(Q.Z,{}),onAction:function(e){var n;return null===(n=g.get(e))||void 0===n?void 0:n.onClick()},children:Array.from(g).map(function(e){var n=(0,i._)(e,2),t=n[0],r=n[1];return(0,l.tZ)(N.ck,{children:(0,l.BX)(p.G,{css:[eb.item,r.isDestructive&&eb.destructiveItem],children:[r.icon,(0,l.tZ)(c.xv,{multiline:!1,children:r.label}),r.isMod?(0,l.tZ)(L.D,{text:"mod",css:eb.modPill}):null]})},t)})}),(0,l.tZ)(M.u,{isOpen:"reportRepl"===v,onRequestClose:function(){return b(null)},children:(0,l.tZ)(S,{replId:o.id,onDone:function(){return b(null)}})}),(0,l.tZ)(M.u,{isOpen:"unpublish"===v,onRequestClose:function(){return b(null)},children:(0,l.tZ)(ed.Z,{repl:o,onDone:function(){return b(null)},source:h})}),(0,l.tZ)(M.u,{isOpen:"warnAuthor"===v,onRequestClose:function(){return b(null)},children:(0,l.tZ)(q,{username:null===(n=o.owner)||void 0===n?void 0:n.username,onDone:function(){return b(null)}})}),(0,l.tZ)(M.u,{isOpen:"banAuthor"===v,onRequestClose:function(){return b(null)},children:(0,l.tZ)(U,{username:null===(t=o.owner)||void 0===t?void 0:t.username,onDone:function(){return b(null)}})}),(0,l.tZ)(M.u,{isOpen:"unpublishTemplate"===v,onRequestClose:function(){return b(null)},children:(0,l.tZ)(ev,{replId:o.id,onDone:function(){return b(null)}})}),(0,l.tZ)(M.u,{isOpen:"demoteTemplate"===v,onRequestClose:function(){return b(null)},children:(0,l.tZ)(ea,{replId:o.id,reviewType:"demote",onDone:function(){return b(null)}})}),(0,l.tZ)(M.u,{isOpen:"promoteTemplate"===v,onRequestClose:function(){return b(null)},children:(0,l.tZ)(ea,{replId:o.id,reviewType:"promote",onDone:function(){return b(null)}})}),(0,l.tZ)(M.u,{isOpen:"modUnpublish"===v,onRequestClose:function(){return b(null)},children:(0,l.tZ)(ed.Z,{repl:o,onDone:function(){return b(null)},source:h})}),(0,l.tZ)(M.u,{isOpen:"update"===v,onRequestClose:function(){return b(null)},children:(0,l.tZ)(u.Z,{repl:o,onDone:function(){return b(null)},source:h})}),a&&(0,l.tZ)(M.u,{isOpen:"modHide"===v,onRequestClose:function(){return b(null)},children:(0,l.tZ)(D,{post:a,onDone:function(){return b(null)}})})]}):null}}}]);
//# sourceMappingURL=5206-6b71a3340d7a5bb7.js.map